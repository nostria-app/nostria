<div class="media-preview-container">
  <div class="preview-header">
    <h2 class="preview-title">{{ data.mediaTitle }}</h2>
    <button mat-icon-button (click)="close()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="preview-content" [ngClass]="{ 'video-content': isVideo() }">
    @if (isImage()) {
      <img
        [src]="data.mediaUrl"
        [alt]="data.mediaTitle"
        class="preview-image"
      />
    } @else if (isVideo()) {
      <div class="video-container">
        @if (isVideoLoading) {
          <div class="loading-indicator">
            <mat-icon>videocam</mat-icon>
            <p>Loading video...</p>
          </div>
        }
        <video
          [src]="data.mediaUrl"
          controls
          autoplay
          class="preview-video"
          (loadeddata)="onVideoLoad()"
        ></video>
      </div>
    } @else {
      <div class="unsupported-media">
        <mat-icon>broken_image</mat-icon>
        <p>This media type cannot be previewed</p>
        <a
          [href]="data.mediaUrl"
          target="_blank"
          mat-raised-button
          color="primary"
        >
          Open File
        </a>
      </div>
    }
  </div>
</div>
