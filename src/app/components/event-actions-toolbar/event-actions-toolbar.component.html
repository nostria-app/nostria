<div class="actions-row"
  [class.mode-labels-only]="actionsDisplayMode() === 'labels-only'"
  [class.mode-icons-only]="actionsDisplayMode() === 'icons-only'"
  [class.mode-icons-and-labels]="actionsDisplayMode() === 'icons-and-labels'">
  <!-- Like with count -->
  <div class="action-button like-action like-hover-container"
    (click)="reactionBtn.sendDefaultReaction(); $event.stopPropagation()">
    <app-reaction-button class="action-icon" #reactionBtn [event]="event()"
      [reactionsFromParent]="effectiveReactions()" (reactionChanged)="onReactionChanged()"
      view="icon"></app-reaction-button>
    @if (likes().length > 0) {
    <span class="action-count">{{ likes().length }}</span>
    }
    <span class="action-text">Like</span>
  </div>

  <!-- Reply -->
  <div class="action-button comment-action" role="button" tabindex="0"
    (click)="replyClick.emit($event)">
    <mat-icon class="action-icon">mode_comment</mat-icon>
    @if (effectiveReplyCount() > 0) {
    <span class="action-count">{{ effectiveReplyCount() }}</span>
    }
    <span class="action-text">Reply</span>
  </div>

  <!-- Share with count (reposts + quotes) -->
  <div class="action-button share-action" role="button" tabindex="0"
    (click)="shareClick.emit(); $event.stopPropagation()">
    <mat-icon class="action-icon">share</mat-icon>
    @if (shareCount() > 0) {
    <span class="action-count">{{ shareCount() }}</span>
    }
    <span class="action-text">Share</span>
  </div>

  <!-- Zap with sats -->
  <div class="action-button zap-action" (click)="zapBtn.onClick($event); $event.stopPropagation()">
    <app-zap-button class="action-icon" #zapBtn [event]="event()" [recipientPubkey]="event().pubkey"
      (zapSent)="onZapSent($event)">
    </app-zap-button>
    @if (totalZapAmount() > 0) {
    <span class="action-count">{{ formatZapAmount(totalZapAmount()) }}</span>
    }
    <span class="action-text">Zap</span>
  </div>

  <!-- Bookmark -->
  <div class="action-button bookmark-action" role="button" tabindex="0"
    (click)="bookmarkClick.emit($event)"
    (contextmenu)="onActionsDisplayModeToggle($event)"
    (touchstart)="onBookmarkLongPressStart($event)"
    (touchend)="onBookmarkLongPressEnd()"
    (touchcancel)="onBookmarkLongPressEnd()">
    <mat-icon class="action-icon">{{ bookmark.getBookmarkIcon(id(), bookmarkType()) }}</mat-icon>
    <span class="action-text">Bookmark</span>
  </div>

  <!-- Top emojis indicator (right-aligned) -->
  @if (likes().length > 0 || zapCount() > 0 || repostCount() > 0 || quoteCount() > 0) {
  <div class="emoji-indicators" (click)="toggleReactionsSummary(); $event.stopPropagation()">
    @if (topEmojis().length > 0) {
    <span class="aggregated-emojis">
      @for (emoji of topEmojis(); track emoji.emoji) {
      @if (emoji.url) {
      <img [src]="emoji.url" [alt]="emoji.emoji" title="Custom emoji" class="emoji-item custom-emoji" />
      } @else {
      <span class="emoji-item">{{ emoji.emoji }}</span>
      }
      }
    </span>
    }
    <mat-icon class="emoji-more">{{ showReactionsSummary() ? 'expand_less' : 'expand_more' }}</mat-icon>
  </div>
  }
</div>

<!-- Expandable reactions summary panel -->
@if (showReactionsSummary()) {
<div class="reactions-summary-container" [@expandCollapse]>
  <app-reaction-summary [reactions]="likes()" [replyCount]="replyCountInput()" [repostCount]="repostCount()"
    [quoteCount]="quoteCount()" [reposts]="repostsInput()" [quotes]="quotesInput()" [zaps]="effectiveZaps()"
    [totalZapAmount]="totalZapAmount()" [zapCount]="zapCount()" [initialTab]="reactionsSummaryTab()"
    [hideTabs]="false">
  </app-reaction-summary>
</div>
}
