<div class="youtube-player-container" [class.footer-mode]="!isFullscreen() && !layout.expandedMediaPlayer()" [class.footer-expanded-mode]="!isFullscreen() && layout.expandedMediaPlayer()" [class.expanded-mode]="isFullscreen()">
  <!-- Header (Fullscreen Mode Only) -->
  <div class="youtube-header" [class.hidden]="!isFullscreen()">
    <div class="youtube-title">
      <h2>{{ media.current()?.title || 'YouTube Video' }}</h2>
    </div>
    <div class="youtube-actions">
      <button mat-icon-button matTooltip="Minimize" (click)="toggleFullscreen()">
        <mat-icon>minimize</mat-icon>
      </button>
      <button mat-icon-button matTooltip="Close" (click)="media.exit()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>

  <!-- Video Area (always present, resized by CSS) -->
  <div class="youtube-area">
    @if (media.youtubeUrl()) {
    <iframe id="ytplayer" class="youtube-iframe" type="text/html" [src]="media.youtubeUrl()" frameborder="0"
      allowfullscreen allow="autoplay" title="YouTube video player"></iframe>
    }
  </div>

  <!-- Footer Controls (hidden in fullscreen — title/artist sits inside the control bar) -->
  <div class="youtube-controls" [class.hidden]="isFullscreen()">
    <!-- Media Info (title + artist) — in the left portion of the control bar -->
    <div class="media-info-text" [class.hidden]="isFullscreen()">
      <div class="media-title">{{ media.current()?.title }}</div>
      <div class="media-artist">
        @if (isNpubArtist(media.current()?.artist)) {
        <app-user-profile [pubkey]="getNpubPubkey(media.current()!.artist!)" view="compact" />
        } @else {
        {{ media.current()?.artist }}
        }
      </div>
    </div>

    <div class="control-buttons">
      <button matTooltip="Previous" [disabled]="!media.canPrevious()" (click)="media.previous()" mat-icon-button>
        <mat-icon>skip_previous</mat-icon>
      </button>

      @if (media.paused) {
      <button matTooltip="Play" (click)="media.resume()" mat-icon-button>
        <mat-icon>play_arrow</mat-icon>
      </button>
      } @else {
      <button matTooltip="Pause" (click)="media.pause()" mat-icon-button>
        <mat-icon>pause</mat-icon>
      </button>
      }

      <button matTooltip="Next" [disabled]="!media.canNext()" (click)="media.next()" mat-icon-button>
        <mat-icon>skip_next</mat-icon>
      </button>

      <button matTooltip="View queue" routerLink="/queue" mat-icon-button>
        <mat-icon>queue_music</mat-icon>
      </button>
    </div>

    <div class="control-actions">
      <button mat-icon-button [matTooltip]="layout.expandedMediaPlayer() ? 'Collapse video' : 'Expand video'" (click)="toggleExpand()">
        <mat-icon>{{ layout.expandedMediaPlayer() ? 'expand_more' : 'expand_less' }}</mat-icon>
      </button>
      <button mat-icon-button matTooltip="Fullscreen" (click)="toggleFullscreen()">
        <mat-icon>open_in_full</mat-icon>
      </button>
      <button matTooltip="Close" (click)="media.exit()" mat-icon-button>
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>
</div>