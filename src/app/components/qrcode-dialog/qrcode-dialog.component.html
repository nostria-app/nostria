<h2 mat-dialog-title>{{ data.title || 'QR Code' }}</h2>
<mat-dialog-content class="qr-code-content centered-dialog-content">
  <canvas #qrCanvas></canvas>
  <br />
  @if (data.mode === 'remote-signer') {
  <div class="instructions">
    <p><strong>To connect your remote signer:</strong></p>
    <ol>
      <li>Open your remote signer app (e.g., Amber, nsec.app, Nostr Nests)</li>
      <li>Look for "Scan QR", "Connect App", or "Add Connection" option</li>
      <li>Scan this QR code with your signer app</li>
      <li>Approve the connection request in your signer</li>
      <li>Once connected, your signer will handle all signing operations</li>
    </ol>
    <div class="info-box">
      <mat-icon class="info-icon">info</mat-icon>
      <p>This creates a secure connection between Nostria and your remote signer using NIP-46. Your private key stays
        safely in your signer app.</p>
    </div>
    <div class="waiting-indicator">
      <mat-icon class="waiting-icon spin">sync</mat-icon>
      <p>Waiting for remote signer to connect...</p>
    </div>
  </div>
  } @else if (data.hideToggle) {
  <div class="instructions">
    <p><strong>To add this account to another device:</strong></p>
    <ol>
      <li>Open Nostria on your other device</li>
      <li>Click "Login" to open the sign-in dialog</li>
      <li>Select "Private Key" as the sign-in method</li>
      <li>Click the QR code scanner icon next to the private key input field</li>
      <li>Scan this QR code with your device's camera</li>
    </ol>
  </div>
  } @else {
  <mat-button-toggle-group hideSingleSelectionIndicator="true" [(ngModel)]="qrStyle" (change)="onToggleGroupChange()">
    <mat-button-toggle value="did">Identifier (in-app)</mat-button-toggle>
    <mat-button-toggle value="profile">Profile URL (camera)</mat-button-toggle>
  </mat-button-toggle-group>

  <p class="wrap">
    {{ qrValue }}
    <button class="copy-button" matTooltip="Copy the identifier" mat-icon-button (click)="copyValue()">
      <mat-icon>content_copy</mat-icon>
    </button>
  </p>
  }
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button [mat-dialog-close]="true" cdkFocusInitial>{{ data.mode === 'remote-signer' ? 'Cancel' : 'Close'
    }}</button>
</mat-dialog-actions>