@if (shouldShowReferences()) {
<div class="tagged-references-container">

  <!-- Article References -->
  @if (articles().length > 0) {
  <div class="articles-section">
    <div class="articles-list">
      @for (article of articles(); track article.kind + ':' + article.pubkey + ':' + article.identifier) {

      @if (getArticleLoadingState(article) === 'loading') {
      <!-- Loading state -->
      <div class="article-preview-card loading">
        <mat-card>
          <div class="preview-content">
            <div class="loading-content">
              <mat-spinner diameter="24"></mat-spinner>
              <span class="loading-text">Loading {{ getKindDisplayName(article.kind) }}...</span>
            </div>
          </div>
        </mat-card>
      </div>
      } @else if (getArticleLoadingState(article) === 'failed') {
      <!-- Failed state -->
      <div class="article-preview-card failed">
        <mat-card>
          <div class="preview-content">
            <div class="failed-content">
              <mat-icon>error_outline</mat-icon>
              <div class="failed-text">
                <div class="failed-title">Unable to load {{ getKindDisplayName(article.kind) }}</div>
                <div class="failed-subtitle">{{ article.identifier }}</div>
              </div>
            </div>
          </div>
        </mat-card>
      </div>
      } @else {
      <!-- Loaded state -->
      <a class="article-preview-card" (click)="onArticleClick($event, article)"
        (keydown.enter)="onArticleClick($event, article)" (keydown.space)="onArticleClick($event, article)" tabindex="0"
        role="button" [attr.aria-label]="'Open ' + getKindDisplayName(article.kind) + ': ' + getArticleTitle(article)">
        <mat-card>
          <div class="preview-content">
            <div class="thumbnail-container">
              @if (getArticleImage(article)) {
              <img class="thumbnail" [src]="getArticleImage(article)!" alt="Article preview image"
                title="Article preview image" />
              } @else {
              <div class="thumbnail-placeholder">
                <mat-icon class="article-icon">{{ getArticleIcon(article.kind) }}</mat-icon>
              </div>
              }
            </div>

            <div class="text-content">
              <div class="preview-title">
                {{ getArticleTitle(article) }}
              </div>
              <div class="preview-description">
                {{ getArticleDescription(article) }}
              </div>
              <div class="preview-metadata">
                <span class="article-kind">{{ getKindDisplayName(article.kind) }}</span>
                <span class="separator">•</span>
                <span class="article-author">
                  by <app-profile-display-name [pubkey]="article.pubkey"></app-profile-display-name>
                </span>
                @if (article.marker) {
                <span class="separator">•</span>
                <span class="article-marker">{{ article.marker }}</span>
                }
              </div>
            </div>
          </div>
        </mat-card>
      </a>
      }

      }
    </div>
  </div>
  }


  <!-- User Mentions -->
  <!-- @if (mentions().length > 0) {
  <div class="mentions-section">
    <span class="mentions-label">Mentioned: </span>
    <div class="mentions-list">
      @for (mention of mentions(); track mention.pubkey) {
      <button class="mention-item" (click)="onMentionClick(mention)" type="button"
        title="View profile of mentioned user" [attr.aria-label]="'View profile of mentioned user'">
        <app-profile-display-name [pubkey]="mention.pubkey"></app-profile-display-name>
      </button>
      }
    </div>
  </div>
  } -->


</div>
}