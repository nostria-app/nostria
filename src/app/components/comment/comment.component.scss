.comment-thread {
  --depth: 0;
  --indent-size: 24px;
  --thread-line-color: var(--mat-sys-outline-variant);

  &.nested {
    margin-left: calc(var(--depth) * var(--indent-size));
    position: relative;

    // Thread line connecting to parent
    &::before {
      content: '';
      position: absolute;
      left: calc(-1 * var(--indent-size) + 8px);
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--thread-line-color);
      border-radius: 1px;
    }

    // Horizontal connector line
    &::after {
      content: '';
      position: absolute;
      left: calc(-1 * var(--indent-size) + 8px);
      top: 24px;
      width: calc(var(--indent-size) - 16px);
      height: 2px;
      background: var(--thread-line-color);
      border-radius: 1px;
    }
  }
}

.comment-card {
  margin-bottom: 12px;

  .nested & {
    // Slightly smaller padding for nested comments
    --mdc-elevated-card-container-shape: 8px;
  }
}

.replies-container {
  margin-top: 4px;
  padding-left: 8px;
  position: relative;

  // Continuous thread line for replies section
  &::before {
    content: '';
    position: absolute;
    left: 8px;
    top: 0;
    bottom: 24px;
    width: 2px;
    background: var(--mat-sys-outline-variant);
    border-radius: 1px;
  }
}

.comment-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.content-loading {
  padding: 8px 0;
  color: var(--mat-sys-on-surface-variant);
  font-style: italic;
}

mat-card-header {
  margin-bottom: 8px;

  // Make the header content stretch full width
  ::ng-deep .mat-mdc-card-header-text {
    flex: 1;
    width: 100%;
  }

  // Ensure event-header component stretches
  ::ng-deep app-event-header {
    display: block;
    width: 100%;
  }
}

// Dark mode adjustments
:host-context(.dark) {
  .comment-thread {
    --thread-line-color: var(--mat-sys-outline-variant);
  }
}