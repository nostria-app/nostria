<div class="welcome">
  <div class="welcome-backdrop">
    <div class="welcome-top">
      <button
        class="welcome-theme-button"
        mat-icon-button
        (click)="themeService.toggleDarkMode()"
      >
        @if (themeService.darkMode()) {
          <mat-icon>dark_mode</mat-icon>
        } @else {
          <mat-icon>light_mode</mat-icon>
        }
      </button>
      <button
        class="welcome-close-button"
        mat-icon-button
        (click)="skipToEnd()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div class="welcome-content">
      <div class="welcome-content-container">
        @let currentStep = getCurrentStep();

        <!-- Step Icon and Visual -->
        <div class="welcome-logo-container">
          <div class="wizard-step-icon">
            <mat-icon class="step-icon">{{ currentStep.icon }}</mat-icon>
          </div>
        </div>

        <!-- Step Content -->
        <div class="wizard-step-content">
          <h1>{{ currentStep.title }}</h1>
          <div class="step-subtitle">{{ currentStep.subtitle }}</div>

          @for (paragraph of currentStep.content; track $index) {
            <p>{{ paragraph }}</p>
          }

          <!-- Features List -->
          @if (currentStep.features.length > 0) {
            <div class="step-features">
              @for (feature of currentStep.features; track feature.icon) {
                <div class="feature-item">
                  <mat-icon class="feature-icon">{{ feature.icon }}</mat-icon>
                  <span class="feature-text">{{ feature.text }}</span>
                </div>
              }
            </div>
          }
        </div>
      </div>
    </div>

    <div class="welcome-footer">
      <div class="step-indicator">
        @if (currentWizardStep() <= totalWizardSteps()) {
          Step {{ currentWizardStep() }} of {{ totalWizardSteps() }}
        }
      </div>

      <div class="welcome-actions">
        @if (currentWizardStep() === 1) {
          <!-- First step actions -->
          <button mat-flat-button (click)="nextStep()">Continue</button>
        } @else if (currentWizardStep() === totalWizardSteps()) {
          <!-- Last step actions -->
          <button mat-button (click)="previousStep()">Back</button>&nbsp;
          <button mat-flat-button (click)="completeWizard()">
            Start Using Nostria
          </button>
        } @else {
          <!-- Middle steps actions -->
          <button mat-button (click)="previousStep()">Back</button>&nbsp;
          <button mat-flat-button (click)="nextStep()">Continue</button>
        }
      </div>
    </div>
  </div>
</div>
