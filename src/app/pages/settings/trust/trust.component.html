<div class="content-medium">
  <h2>Trust</h2>

  <div class="setting-item">
    <span>Enable Web of Trust Features</span>
    <mat-slide-toggle [checked]="localSettings.trustEnabled()" (change)="toggleTrustEnabled()">
    </mat-slide-toggle>
  </div>
  <p class="setting-description">
    Enable Web of Trust features using NIP-85 trusted assertions. This allows you to view
    reputation metrics and user statistics calculated by trusted service providers.
  </p>

  @if (localSettings.trustEnabled()) {
  <div>
    <h2>Trust Relay</h2>
    <p>
      Select which relay to use for fetching NIP-85 trusted assertions (kind 30382 events).
      These relays provide calculated metrics like follower counts, user ranks, and activity
      statistics.
    </p>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Trust Relay</mat-label>
      <mat-select [ngModel]="localSettings.trustRelay()" (selectionChange)="setTrustRelay($event.value)">
        @for (relay of trustRelays; track relay.url) {
        <mat-option [value]="relay.url">
          <div class="relay-option">
            <div class="relay-name">{{ relay.name }}</div>
            <div class="relay-description">{{ relay.description }}</div>
          </div>
        </mat-option>
        }
      </mat-select>
      <mat-hint>Current: {{ localSettings.trustRelay() }}</mat-hint>
    </mat-form-field>

    <div class="info-card">
      <mat-icon>info</mat-icon>
      <div>
        <strong>About NIP-85 Trusted Assertions</strong>
        <p>
          NIP-85 allows service providers to calculate and publish metrics about users and
          events that would be too resource-intensive to compute on clients. These include
          follower counts, user ranks, post counts, zap amounts, and more. The relay setting
          is stored locally and is not synced across devices.
        </p>
      </div>
    </div>
  </div>
  }
</div>