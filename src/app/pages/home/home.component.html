<div class="home-container">
  <!-- Home page now serves as the content viewer for navigation stack items -->
  <!-- The global feeds panel is handled at the app level -->
  
  @if (hasNavigatedItems()) {
  <div class="content-area-wrapper">
    <!-- Navigation header for back/close -->
    <div class="content-header" [class.header-hidden]="contentHeaderHidden()">
      @if (hasMultipleItems()) {
      <!-- Back button when there are multiple items -->
      <button mat-icon-button (click)="goBack()" class="nav-button">
        <mat-icon>arrow_back</mat-icon>
      </button>
      } @else {
      <!-- Close button when there's only one item -->
      <button mat-icon-button (click)="close()" class="nav-button">
        <mat-icon>close</mat-icon>
      </button>
      }
      <span class="content-title">{{ getNavigationTitle() }}</span>
    </div>

    <!-- Content area -->
    <div class="content-area" (scroll)="onContentScroll($event)">
      @let item = currentItem();
      @if (item) {
        @if (item.type === 'event') {
          <app-event-page [dialogEventId]="item.id" [dialogEvent]="item.data">
          </app-event-page>
        } @else if (item.type === 'profile') {
          <app-profile [twoColumnPubkey]="item.id"></app-profile>
        }
      }
    </div>
  </div>
  } @else {
  <!-- Empty state when no navigation items - just show a placeholder -->
  <!-- The feeds panel is the main content when expanded -->
  <div class="empty-home-state">
    <div class="empty-content">
      <mat-icon class="empty-icon">dynamic_feed</mat-icon>
      <p class="empty-text">Select an item from your feeds to view it here</p>
    </div>
  </div>
  }
</div>