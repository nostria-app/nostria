<div class="tab-content">
  @if (sortedArticles().length === 0 && !profileState.isLoadingMoreArticles()) {
  <div class="empty-state">
    <mat-icon>article</mat-icon>
    <p>No articles to display yet</p>
  </div>
  } @else {
  <div class="articles-grid">
    @for (note of sortedArticles(); track note.event.id) {
    <div class="article-card" (click)="openArticle(note.event)" (keydown.enter)="openArticle(note.event)" tabindex="0"
      role="button">
      <div class="article-image-container">
        @if (getArticleImage(note.event); as image) {
        <img [src]="image" [alt]="getArticleTitle(note.event)" [title]="getArticleTitle(note.event)" loading="lazy" />
        } @else {
        <div class="image-placeholder">
          <mat-icon>article</mat-icon>
        </div>
        }
      </div>
      <div class="article-content">
        <div class="article-author-row">
          <app-user-profile [pubkey]="note.event.pubkey" view="compact" [showRank]="false"></app-user-profile>
          <span class="article-date">{{ note.event.created_at | ago }}</span>
        </div>
        <h3 class="article-title">{{ getArticleTitle(note.event) || 'Untitled' }}</h3>
        <div class="article-actions">
          <app-reaction-button [event]="note.event"></app-reaction-button>
          <button mat-icon-button class="action-btn comment-btn"
            (click)="openComments(note.event); $event.stopPropagation()" matTooltip="Comments">
            <mat-icon>chat_bubble_outline</mat-icon>
            @if (getEngagement(note.event.id); as engagement) {
            @if (!engagement.isLoading && engagement.commentCount > 0) {
            <span class="count-badge">{{ engagement.commentCount }}</span>
            }
            }
          </button>
          <span class="zap-action" (click)="$event.stopPropagation()">
            <app-zap-button [event]="note.event"></app-zap-button>
            @if (getEngagement(note.event.id); as engagement) {
            @if (!engagement.isLoading && engagement.zapTotal > 0) {
            <span class="zap-count">{{ formatZapAmount(engagement.zapTotal) }}</span>
            }
            }
          </span>
          <button mat-icon-button class="action-btn" (click)="shareArticle(note.event); $event.stopPropagation()"
            matTooltip="Share">
            <mat-icon>share</mat-icon>
          </button>
        </div>
      </div>
    </div>
    }
  </div>

  <!-- Loading more indicator -->
  @if (profileState.isLoadingMoreArticles()) {
  <div class="loading-more-indicator">
    <mat-spinner diameter="24"></mat-spinner>
    <p>Loading more articles...</p>
  </div>
  }

  <!-- No more content indicator -->
  @if (!profileState.hasMoreArticles() && profileState.articles().length > 0) {
  <div class="no-more-content">
    <mat-icon>check_circle</mat-icon>
    <p>You've seen all articles</p>
  </div>
  }
  }
</div>