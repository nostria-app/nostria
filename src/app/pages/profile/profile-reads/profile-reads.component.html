<div class="tab-content">
  @if (profileState.isInitiallyLoading() && visibleArticles().length === 0) {
  <div class="loading-state">
    <mat-spinner [diameter]="40"></mat-spinner>
    <p>Loading articles...</p>
  </div>
  } @else if (visibleArticles().length === 0 && !profileState.isLoadingMoreArticles()) {
  <div class="empty-state">
    <mat-icon>article</mat-icon>
    <p>No articles to display yet</p>
  </div>
  } @else {
  <div class="articles-grid">
    @for (note of visibleArticles(); track note.event.id) {
    <div class="article-card" (click)="openArticle(note.event)" (keydown.enter)="openArticle(note.event)"
      (keydown.space)="openArticle(note.event); $event.preventDefault()" tabindex="0">
      <div class="article-image-container">
        @if (getArticleImage(note.event); as image) {
        <img [src]="image" [alt]="getArticleTitle(note.event) || 'Article image'" title="Article image"
          loading="lazy" />
        } @else {
        <div class="image-placeholder">
          <mat-icon>article</mat-icon>
        </div>
        }
      </div>
      <div class="article-content">
        <div class="article-author-row">
          <app-user-profile [pubkey]="note.event.pubkey" view="compact" [showRank]="false"></app-user-profile>
          <span class="article-date">{{ note.event.created_at | ago }}</span>
        </div>
        <h3 class="article-title">{{ getArticleTitle(note.event) || 'Untitled' }}</h3>
        @if (getArticleSummary(note.event); as summary) {
        <p class="article-summary">{{ summary }}</p>
        }
        <div class="article-footer">
          <span class="read-time">{{ getReadTime(note.event) }}</span>
          <button mat-icon-button class="action-btn" (click)="shareArticle(note.event); $event.stopPropagation()"
            matTooltip="Share">
            <mat-icon>share</mat-icon>
          </button>
        </div>
      </div>
    </div>
    }
  </div>

  <!-- Loading more indicator -->
  @if (profileState.isLoadingMoreArticles()) {
  <div class="loading-more-indicator">
    <mat-spinner diameter="24"></mat-spinner>
    <p>Loading more articles...</p>
  </div>
  }

  <!-- No more content indicator -->
  @if (!profileState.hasMoreArticles() && visibleArticles().length >= sortedArticles().length && sortedArticles().length
  > 0) {
  <div class="no-more-content">
    <mat-icon>check_circle</mat-icon>
    <p>You've seen all articles</p>
  </div>
  }
  }
</div>