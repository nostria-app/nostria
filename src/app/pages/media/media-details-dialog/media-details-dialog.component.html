<h2 mat-dialog-title>Media Details</h2>
<mat-dialog-content>
  <div class="media-preview">
    @if (mediaItem.type === 'image') {
      <img [src]="mediaItem.url" [alt]="mediaItem.url || 'Image'">
    } @else if (mediaItem.type === 'video') {
      <video [src]="mediaItem.url" controls></video>
    }
  </div>
  
  @if (!isEditing()) {
    <div class="details-container">
      <div class="detail-row">
        <span class="label">Title</span>
        <span class="value">{{ mediaItem.url || 'Untitled' }}</span>
      </div>
<!--       
      @if (mediaItem.description) {
        <div class="detail-row">
          <span class="label">Description</span>
          <span class="value description">{{ mediaItem.description }}</span>
        </div>
      } -->
      
      <div class="detail-row">
        <span class="label">File Type</span>
        <span class="value">{{ mediaItem.type }}</span>
      </div>
      
      <div class="detail-row">
        <span class="label">Size</span>
        <span class="value">{{ formatFileSize(mediaItem.size) }}</span>
      </div>
      
      <!-- @if (mediaItem.width && mediaItem.height) {
        <div class="detail-row">
          <span class="label">Dimensions</span>
          <span class="value">{{ mediaItem.width }} Ã— {{ mediaItem.height }}</span>
        </div>
      }
      
      @if (mediaItem.duration) {
        <div class="detail-row">
          <span class="label">Duration</span>
          <span class="value">{{ formatDuration(mediaItem.duration) }}</span>
        </div>
      } -->
      
      <div class="detail-row">
        <span class="label">Upload Date</span>
        <span class="value">{{ mediaItem.uploaded | timestamp:'shortDate' }}</span>
      </div>
      
      @if (mediaItem.sha256) {
        <div class="detail-row">
          <span class="label">Nostr Event ID</span>
          <span class="value event-id">{{ mediaItem.sha256 }}</span>
        </div>
      }
    </div>
  } @else {
    <form [formGroup]="metadataForm" class="edit-form">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Title</mat-label>
        <input matInput formControlName="title" placeholder="Add a title">
      </mat-form-field>
      
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <textarea 
          matInput 
          formControlName="description" 
          placeholder="Add a description"
          rows="4"
        ></textarea>
      </mat-form-field>
    </form>
  }
</mat-dialog-content>

<mat-dialog-actions align="end">
  @if (!isEditing()) {
    <button mat-button (click)="toggleEditMode()">
      <mat-icon>edit</mat-icon> Edit Metadata
    </button>
    <button mat-button (click)="close()">Close</button>
  } @else {
    <button mat-button (click)="toggleEditMode()">Cancel</button>
    <button 
      mat-raised-button 
      color="primary" 
      [disabled]="metadataForm.invalid"
      (click)="saveMetadata()"
    >
      Save Changes
    </button>
  }
</mat-dialog-actions>
